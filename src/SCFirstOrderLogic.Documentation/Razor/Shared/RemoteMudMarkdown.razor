@using Markdig
@inherits ComponentBase
@inject HttpClient Http

<MudMarkdown Value="@markdown" OverrideHeaderTypo="OverrideHeaderTypo" MarkdownPipeline="@markdownPipeline" />

@code {
    private readonly MarkdownPipeline markdownPipeline = new MarkdownPipelineBuilder()
        .UseAutoIdentifiers()
        .UseTaskLists()
        .UsePipeTables()
        .UseBootstrap()
        .Build();

    private string markdown = string.Empty;

    [Parameter]
    public string? Uri { get; set; }

    protected override async Task OnInitializedAsync()
    {
        markdown = await Http.GetStringAsync(Uri);
    }

    private Typo OverrideHeaderTypo(Typo typo)
    {
        return typo switch
        {
            Typo.h1 => Typo.h3,
            Typo.h2 => Typo.h4,
            Typo.h3 => Typo.h5,
            _ => Typo.h6
        };
    }
}
